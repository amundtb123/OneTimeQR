import i18next from 'i18next';
import { initReactI18next } from 'react-i18next';

const STORAGE_KEY = 'onetimeqr_language';

// Detect system language
function detectSystemLanguage(): string {
  if (typeof window === 'undefined') return 'en';
  
  const storedLanguage = localStorage.getItem(STORAGE_KEY);
  if (storedLanguage) return storedLanguage;
  
  // Get browser/system language
  const browserLang = navigator.language || (navigator as any).userLanguage || 'en';
  const langCode = browserLang.split('-')[0].toLowerCase();
  
  // Support Norwegian (no, nn) and English (en)
  if (langCode === 'no' || langCode === 'nn') {
    return 'no';
  }
  
  return 'en';
}

const initialLanguage = detectSystemLanguage();

const resources = {
  en: {
    translation: {
      common: {
        appName: 'OneTimeQR',
        tagline: 'Share files via QR',
        upload: 'Upload',
        myQrs: 'My QR codes',
        login: 'Log in',
        logout: 'Log out',
        user: 'User',
        loginError: 'Could not log in',
        logoutSuccess: 'Logged out',
        logoutError: 'Could not log out',
        language: 'Language',
        english: 'English',
        norwegian: 'Norwegian',
        back: 'Back',
      },
      upload: {
        getStarted: 'Get started right away',
        freeLimit: 'Share files up to <strong>1 MB</strong> with <strong>10 minutes</strong> validity',
        loginPrompt: 'üíé Log in for more: Up to 20 MB, longer validity and advanced features',
        shareContent: 'Share content via QR code',
        combineFiles: 'Combine files, text and URLs ‚Ä¢ Free up to 20 MB',
        combineFilesGuest: 'Combine files (max 1 MB), text and URLs',
        title: 'Title (optional)',
        titlePlaceholder: 'QR code name',
        whatToShare: 'What do you want to share? (optional)',
        files: 'File(s) / Image(s)',
        addFiles: 'Add file(s)',
        fileTypes: 'All file types supported',
        text: 'Text (max 200 characters)',
        textPlaceholder: 'Write your message...',
        characters: 'characters',
        urls: 'URL(s)',
        urlPlaceholder: 'https://example.com',
        invalidUrl: 'Invalid URL. Must start with http:// or https://',
        expiryTitle: 'How long should it live?',
        expirySubtitle: 'Content is automatically deleted after selected time',
        expiry10m: '10 minutes',
        expiry30m: '30 minutes',
        expiry1h: '1 hour',
        expiry24h: '24 hours',
        expiry7d: '7 days',
        expiryScan: 'Until someone scans',
        pro: 'Pro',
        loginForMore: 'Log in to access longer validity (30 min, 1h, 24h, 7d) and more features.',
        scanExpiryNote: 'Content expires after 7 days regardless. Set number of scans under "Advanced settings".',
        securityTitle: 'Choose security level',
        securitySubtitle: 'Extra protection with two QR codes',
        standardMode: 'Standard mode',
        standardModeDesc: 'One QR code ‚Äì quick and easy',
        standardModeNote: 'File deleted after time or views',
        secureMode: 'Secure Mode',
        secureModeDesc: 'Two QR codes ‚Äì extra security',
        secureModeForSensitive: 'Use Secure Mode for sensitive content',
        secureModeNote: 'Recipient must scan QR #2 to unlock file',
        secureModeInfo: '<strong>Extra security:</strong> QR #1 grants access, QR #2 unlocks content. Both must be scanned to view the file.',
        secureModeLoginRequired: 'Secure Mode requires login. Log in to use two-QR-code security.',
        advancedSettings: 'Advanced settings',
        advancedSettingsSubtitle: 'Optional restrictions and security',
        maxScans: 'Max number of scans',
        maxScansNote: 'Leave empty for unlimited',
        maxDownloads: 'Max downloads',
        maxDownloadsNote: 'Leave empty for unlimited',
        viewOnly: 'View only',
        viewOnlyNote: 'Blocks download and long-press',
        noPreview: 'Preview not available',
        noPreviewNote: 'Download only, no content preview',
        passwordProtection: 'Password protection',
        passwordNote: 'Require password when scanning',
        passwordPlaceholder: 'Enter password',
        generateQr: 'Generate QR code',
        generating: 'Generating...',
        addContent: 'Add at least one item (file, text or URL)',
        fileSizeExceeded: 'File size exceeds limit of {{maxSize}}. {{loginPrompt}}',
        secureModeRequiresLogin: 'Secure Mode requires login. Log in to use two-QR-code security.',
        createQrError: 'Could not create QR code',
        mustBeLoggedIn: 'You must be logged in to create QR codes',
        sharedContent: 'Shared content',
        noShareableLink: 'No shareable link',
        noShareableLinkDesc: 'Scanning adds one-time token that expires after use. QR code can be scanned many times, but URL cannot be shared further.',
        autoCleanup: 'Automatic cleanup',
        autoCleanupDesc: 'File deleted after time or use. Zero manual work. No copies.',
        securityFirst: 'Security first',
        securityFirstDesc: 'Zero-link technology: URLs with one-time tokens. No permanent access.',
        coinCost: 'Coin cost',
        free: 'Free',
        insufficientCoins: 'You need {{required}} coins, but you only have {{current}} coins',
        insufficientCoinsShort: 'Not enough coins',
        loginRequiredForCoins: 'Please log in to use premium features',
        loadingCoins: 'Loading coins...',
        coinsDeducted: '{{amount}} coins deducted',
        coinDeductionFailed: 'QR created but coins could not be deducted. Please contact support.',
        acceptTerms: 'I accept the Terms of Use and Privacy Policy',
        acceptTermsPrefix: 'I accept',
        termsAndPrivacy: 'Terms & Privacy',
        mustAcceptTerms: 'You must accept the Terms of Use to continue',
      },
      coins: {
        yourCoins: 'Your coins',
        buy50Coins: 'Buy 50 coins ‚Äì 29 kr',
        buyCoins: 'Kj√∏p mynter',
        loginRequired: 'Please log in to buy coins',
        checkoutError: 'Could not start checkout',
      },
      success: {
        thankYou: 'Thank you for your purchase!',
        purchaseComplete: 'Your purchase has been completed successfully.',
        backToHome: 'Back to home',
        processing: 'Processing...',
        waitingForCoins: 'Waiting for coins to be updated...',
      },
      qrList: {
        noQrsYet: 'No QR codes yet',
        uploadFile: 'Upload a file to get started',
        loginToSee: 'Log in to see your QR codes',
        loginPrompt: 'Log in with Google to manage your QR codes and see statistics',
        myQrs: 'My QR codes',
        manageShares: 'Manage your active shares',
        created: 'Created',
        deleteQr: 'Delete QR code?',
        deleteConfirm: 'Are you sure you want to delete "{{fileName}}"? This action cannot be undone, and the file will be permanently deleted.',
        cancel: 'Cancel',
        delete: 'Delete',
        expired: 'Expired',
        expiresIn: 'Expires in {{time}}',
        expiresInHours: 'Expires in {{hours}}h {{minutes}}m {{seconds}}s',
        expiresInMinutes: 'Expires in {{minutes}}m {{seconds}}s',
        expiresInDays: 'Expires in {{days}} day',
        expiresInDaysPlural: 'Expires in {{days}} days',
        untilFirstScan: 'Until first scan',
        noExpiry: 'No expiry time',
        secureMode: 'Secure Mode',
        passwordProtected: 'Password protected',
        viewOnly: 'View only',
        scans: 'Scans',
        downloads: 'Downloads',
        showFile: 'Show file',
        hideFile: 'Hide file',
        loadingFile: 'Loading file...',
        couldNotLoadFile: 'Could not load file',
        qrCodePointsTo: 'QR code points to:',
        copyLink: 'Copy link',
        copied: 'Copied!',
        downloadQr: 'Download QR code',
        downloadBothQrs: 'Download both QR codes',
        bothQrsDownloaded: 'Both QR codes downloaded! üîê',
        qrDownloaded: 'QR code downloaded! ‚úÖ',
        accessCode: 'Access code',
        shareWithRecipient: 'Share with recipient',
        unlockCode: 'Unlock code',
        keyToUnlock: 'Key to unlock',
        noUrl: 'üîí No URL - view only',
        shareQr1First: 'üí° Share QR #1 first, then QR #2 via another channel for extra security',
        twoQrsForSecurity: 'Two QR codes for extra security ‚Äì both must be scanned',
        scanToShare: 'Scan QR code to share ‚Äì no link, no history',
      },
      scanView: {
        somethingShared: "Something's shared with you!",
        openingContent: 'Opening your content...',
        back: 'Back',
        loadingQr: 'Loading QR code...',
        couldNotLoadQr: 'Could not load QR code',
        linkCannotBeShared: 'üîí This link cannot be shared. You must scan the QR code again to get access.',
        qrExpired: '‚è±Ô∏è This QR code has expired and has already been deleted from the system.',
        qrNotFound: 'üîç QR code not found. It may have been deleted.',
        couldNotLoad: '‚ö†Ô∏è Could not load QR code. Please try again.',
        passwordProtected: 'This file is password protected',
        enterPassword: 'Enter password to access',
        passwordPlaceholder: 'Enter password',
        wrongPassword: 'Wrong password. Try again.',
        unlock: 'Unlock',
        accessGranted: 'You now have access to the file',
        secureModeDecrypted: 'Secure Mode: decrypted locally',
        expiresIn: 'Expires in {{time}}',
        textMessage: 'Text message',
        copyText: 'Copy text',
        textCopied: 'Text copied',
        urls: 'URL',
        urlsPlural: 'URLs',
        copyAll: 'Copy all',
        linksCopied: 'Links copied',
        openAll: 'Open all',
        copy: 'Copy',
        open: 'Open',
        fileType: 'File type',
        size: 'Size',
        downloadFile: 'Download file',
        loadingFile: 'Loading file...',
        couldNotDownload: 'Could not download file',
        fileDownloaded: 'File downloaded',
        viewOnly: 'This file can only be viewed, not downloaded',
        previewNotAvailable: 'Preview is not available for this content. Download the file to view content.',
        browserNotSupported: 'Your browser does not support video playback.',
        browserNotSupportedAudio: 'Your browser does not support audio playback.',
        fileViewOnly: '‚ö†Ô∏è This file can only be viewed',
        sharingStats: 'Sharing statistics',
        totalScans: 'Total number of scans',
        totalDownloads: 'Total number of downloads',
      },
      unlockScreen: {
        unlockFile: 'Unlock file',
        scanQr2: 'To open this file, you must scan the second QR code (QR #2)',
        openingCamera: 'Opening camera...',
        secureModeActive: 'Secure Mode activated',
        secureModeDesc: 'This file is protected with two-QR-code security. Scan the unlock code to decrypt content locally.',
        expiryDate: 'Expiry date',
        scanQr2Button: 'Scan QR #2',
        unlocking: 'Unlocking...',
        neverStoredUnencrypted: 'File is never stored unencrypted on the server',
        invalidQr: 'Invalid QR code. Please scan the unlock code (QR #2).',
      },
      qrDetail: {
        qr2NotAvailable: 'QR #2 not available',
        qr2SecurityNote: 'For security reasons, QR #2 (unlock code) is only available when first created. Please download both QR codes immediately after creation.',
        secureModeTwoQrs: 'Secure Mode ‚Äì Two QR codes',
        yourQrCodes: 'Your QR codes',
        bothMustBeScanned: 'Both must be scanned to access',
        accessCode: 'Access code',
        shareWithRecipient: 'Share with recipient',
        unlockCode: 'Unlock code',
        keyToUnlock: 'Key to unlock',
        downloadQr2Immediately: '‚ö†Ô∏è Download QR #2 immediately!',
        qr2CannotBeShownAgain: 'QR #2 cannot be shown again after the page is refreshed. Download both QR codes now.',
        shareQr1First: 'üí° Share QR #1 first, then QR #2 via another channel for extra security',
        downloadBoth: 'Download both',
        shareQr1: 'Share QR #1',
        yourQrCode: 'Your QR code',
        scanToAccess: 'Scan code to access file',
        downloadQr: 'Download QR',
        share: 'Share',
        fileDetails: 'File details',
        fileName: 'File name',
        size: 'Size',
        type: 'Type',
        mode: 'Mode',
        viewOnly: 'View only',
        settings: 'Settings',
        expiresIn: 'Expires in',
        maxScans: 'Max scans',
        maxDownloads: 'Max downloads',
        password: 'Password',
        activated: 'Activated',
        created: 'Created',
        realtimeStats: 'Real-time statistics',
        scans: 'Scans',
        downloads: 'Downloads',
        previewHowFileLooks: 'Preview how the file looks',
        previewDesc: 'See how the recipient will experience the file',
        preview: 'Preview',
        linkCopied: 'Link copied!',
        couldNotCopyLink: 'Could not copy link. Try again.',
        shareFile: 'Share file: {{fileName}}',
        scanQrToAccess: 'Scan QR code to access file',
        bothQrsDownloaded: 'Both QR codes downloaded',
        qrDownloaded: 'QR code downloaded',
        untilFirstScan: 'Until first scan',
        never: 'Never',
        lessThanHour: 'Less than 1 hour',
        day: 'day',
        days: 'days',
        hour: 'hour',
        hours: 'hours',
      },
      app: {
        qrCreated: 'QR code created!',
        qrDeleted: 'QR code deleted',
        couldNotDeleteQr: 'Could not delete QR code',
        couldNotLoadQrs: '‚ö†Ô∏è Could not load QR codes. Please try again.',
        mustScanQr1First: 'You must scan QR #1 first!',
        qr2WithoutQr1: 'This QR code is an unlock code (QR #2) that requires you to first scan the access code (QR #1).',
        secureModeUsesTwoQrs: 'Secure Mode uses two QR codes for extra security:',
        qr1AccessCode: '1Ô∏è‚É£ QR #1 (Access code) - Scan this first',
        qr2UnlockCode: '2Ô∏è‚É£ QR #2 (Unlock code) - Scan this next',
        backToHome: 'Back to home page',
        fetchingDecryptionKey: 'Fetching decryption key...',
        couldNotFetchKey: '‚ö†Ô∏è Could not fetch decryption key',
        qr1ScanExpired: '‚ö†Ô∏è QR #1 scan expired. Scan QR #1 again!',
      },
      coins: {
        yourCoins: 'Your coins',
        buy50Coins: 'Buy 50 coins ‚Äì 29 kr',
        buyCoins: 'Kj√∏p mynter',
        loginRequired: 'Please log in to buy coins',
        checkoutError: 'Could not start checkout',
      },
      success: {
        thankYou: 'Thank you for your purchase!',
        purchaseComplete: 'Your purchase has been completed successfully.',
        backToHome: 'Back to home',
      },
    },
  },
  no: {
    translation: {
      common: {
        appName: 'OneTimeQR',
        tagline: 'Del filer via QR',
        upload: 'Last opp',
        myQrs: 'Mine QR-koder',
        login: 'Logg inn',
        logout: 'Logg ut',
        user: 'Bruker',
        loginError: 'Kunne ikke logge inn',
        logoutSuccess: 'Logget ut',
        logoutError: 'Kunne ikke logge ut',
        language: 'Spr√•k',
        english: 'Engelsk',
        norwegian: 'Norsk',
        back: 'Tilbake',
      },
      upload: {
        getStarted: 'Kom i gang direkte',
        freeLimit: 'Del filer opptil <strong>1 MB</strong> med <strong>10 minutters</strong> gyldighet',
        loginPrompt: 'üíé Logg inn for mer: Opptil 20 MB, lengre gyldighet og avanserte features',
        shareContent: 'Del innhold via QR-kode',
        combineFiles: 'Kombiner filer, tekst og URLer ‚Ä¢ Gratis opp til 20 MB',
        combineFilesGuest: 'Kombiner filer (maks 1 MB), tekst og URLer',
        title: 'Tittel (valgfritt)',
        titlePlaceholder: 'Navn p√• QR-koden',
        whatToShare: 'Hva vil du dele? (valgfritt)',
        files: 'Fil(er) / Bilde(r)',
        addFiles: 'Legg til fil(er)',
        fileTypes: 'Alle filtyper st√∏ttes',
        text: 'Tekst (maks 200 tegn)',
        textPlaceholder: 'Skriv din melding...',
        characters: 'tegn',
        urls: 'URL(er)',
        urlPlaceholder: 'https://example.com',
        invalidUrl: 'Ugyldig URL. M√• starte med http:// eller https://',
        expiryTitle: 'Hvor lenge skal den leve?',
        expirySubtitle: 'Innholdet slettes automatisk etter valgt tid',
        expiry10m: '10 minutter',
        expiry30m: '30 minutter',
        expiry1h: '1 time',
        expiry24h: '24 timer',
        expiry7d: '7 dager',
        expiryScan: 'Til noen scanner',
        pro: 'Pro',
        loginForMore: 'Logg inn for √• f√• tilgang til lengre gyldighet (30 min, 1h, 24h, 7d) og flere funksjoner.',
        scanExpiryNote: 'Innholdet utl√∏per uansett etter 7 dager. Sett antall scanninger under "Avanserte innstillinger".',
        securityTitle: 'Velg sikkerhetsniv√•',
        securitySubtitle: 'Ekstra beskyttelse med to QR-koder',
        standardMode: 'Standard mode',
        standardModeDesc: '√ân QR-kode ‚Äì raskt og enkelt',
        standardModeNote: 'Filen slettes etter tid eller visninger',
        secureMode: 'Secure Mode',
        secureModeDesc: 'To QR-koder ‚Äì ekstra sikkerhet',
        secureModeForSensitive: 'Bruk Secure Mode for sensitivt innhold',
        secureModeNote: 'Mottaker m√• skanne QR #2 for √• √•pne filen',
        secureModeInfo: '<strong>Ekstra sikkerhet:</strong> QR #1 gir tilgang, QR #2 l√•ser opp innholdet. Begge m√• skannes for √• se filen.',
        secureModeLoginRequired: 'Secure Mode krever innlogging. Logg inn for √• bruke to-QR-kode-sikkerhet.',
        advancedSettings: 'Avanserte innstillinger',
        advancedSettingsSubtitle: 'Valgfrie begrensninger og sikkerhet',
        maxScans: 'Maks antall scanninger',
        maxScansNote: 'La st√• tom for ubegrenset',
        maxDownloads: 'Maks nedlastinger',
        maxDownloadsNote: 'La st√• tom for ubegrenset',
        viewOnly: 'Kun visning',
        viewOnlyNote: 'Blokkerer nedlasting og long-press',
        noPreview: 'Forh√•ndsvisning ikke tilgjengelig',
        noPreviewNote: 'Kun nedlasting, ingen visning av innhold',
        passwordProtection: 'Passordbeskyttelse',
        passwordNote: 'Krev passord ved scanning',
        passwordPlaceholder: 'Skriv inn passord',
        generateQr: 'Lag QR-kode',
        generating: 'Lager...',
        addContent: 'Legg til minst ett element (fil, tekst eller URL)',
        fileSizeExceeded: 'Filst√∏rrelse overskrider grensen p√• {{maxSize}}. {{loginPrompt}}',
        secureModeRequiresLogin: 'Secure Mode krever innlogging. Logg inn for √• bruke to-QR-kode-sikkerhet.',
        createQrError: 'Kunne ikke opprette QR-kode',
        mustBeLoggedIn: 'Du m√• v√¶re logget inn for √• opprette QR-koder',
        sharedContent: 'Delt innhold',
        noShareableLink: 'Ingen delbar lenke',
        noShareableLinkDesc: 'Scanning legger til engangs-token som utl√∏per etter bruk. QR-koden kan scannes mange ganger, men URL-en kan ikke deles videre.',
        autoCleanup: 'Automatisk opprydding',
        autoCleanupDesc: 'Filen slettes etter tid eller bruk. Null manuelt arbeid. Ingen kopier.',
        securityFirst: 'Sikkerhet f√∏rst',
        securityFirstDesc: 'Zero-link teknologi: URL-er med one-time tokens. Ingen permanent tilgang.',
        coinCost: 'Coin-kostnad',
        free: 'Gratis',
        insufficientCoins: 'Du trenger {{required}} coins, men du har bare {{current}} coins',
        insufficientCoinsShort: 'Ikke nok coins',
        loginRequiredForCoins: 'Vennligst logg inn for √• bruke premium-funksjoner',
        loadingCoins: 'Laster coins...',
        coinsDeducted: '{{amount}} coins trukket',
        coinDeductionFailed: 'QR opprettet, men coins kunne ikke trekkes. Vennligst kontakt support.',
        acceptTerms: 'Jeg godtar Vilk√•r for bruk og Personvernregler',
        acceptTermsPrefix: 'Jeg godtar',
        termsAndPrivacy: 'Vilk√•r & Personvern',
        mustAcceptTerms: 'Du m√• godta Vilk√•r for bruk for √• fortsette',
      },
      qrList: {
        noQrsYet: 'Ingen QR-koder enn√•',
        uploadFile: 'Last opp en fil for √• komme i gang',
        loginToSee: 'Logg inn for √• se dine QR-koder',
        loginPrompt: 'Logg inn med Google for √• administrere dine QR-koder og se statistikk',
        myQrs: 'Mine QR-koder',
        manageShares: 'Administrer dine aktive delinger',
        created: 'Opprettet',
        deleteQr: 'Slett QR-kode?',
        deleteConfirm: 'Er du sikker p√• at du vil slette "{{fileName}}"? Denne handlingen kan ikke angres, og filen vil bli permanent slettet.',
        cancel: 'Avbryt',
        delete: 'Slett',
        expired: 'Utl√∏pt',
        expiresIn: 'Utl√∏per om {{time}}',
        expiresInHours: 'Utl√∏per om {{hours}}t {{minutes}}m {{seconds}}s',
        expiresInMinutes: 'Utl√∏per om {{minutes}}m {{seconds}}s',
        expiresInDays: 'Utl√∏per om {{days}} dag',
        expiresInDaysPlural: 'Utl√∏per om {{days}} dager',
        untilFirstScan: 'Til f√∏rste scanning',
        noExpiry: 'Ingen utl√∏pstid',
        secureMode: 'Secure Mode',
        passwordProtected: 'Passordbeskyttet',
        viewOnly: 'Kun visning',
        scans: 'Scanninger',
        downloads: 'Nedlastinger',
        showFile: 'Vis fil',
        hideFile: 'Skjul fil',
        loadingFile: 'Laster fil...',
        couldNotLoadFile: 'Kunne ikke laste filen',
        qrCodePointsTo: 'QR-koden peker til:',
        copyLink: 'Kopier lenke',
        copied: 'Kopiert!',
        downloadQr: 'Last ned QR-kode',
        downloadBothQrs: 'Last ned begge QR-koder',
        bothQrsDownloaded: 'Begge QR-koder lastet ned! üîê',
        qrDownloaded: 'QR-kode lastet ned! ‚úÖ',
        accessCode: 'Tilgangskode',
        shareWithRecipient: 'Del med mottaker',
        unlockCode: 'Oppl√•singskode',
        keyToUnlock: 'N√∏kkel for √• l√•se opp',
        noUrl: 'üîí Ingen URL - kun visning',
        shareQr1First: 'üí° Del QR #1 f√∏rst, deretter QR #2 via en annen kanal for ekstra sikkerhet',
        twoQrsForSecurity: 'To QR-koder for ekstra sikkerhet ‚Äì begge m√• skannes',
        scanToShare: 'Skann QR-koden for √• dele ‚Äì ingen lenke, ingen historikk',
      },
      scanView: {
        somethingShared: 'Noe er delt med deg!',
        openingContent: '√Öpner innholdet ditt...',
        back: 'Tilbake',
        loadingQr: 'Laster QR-kode...',
        couldNotLoadQr: 'Kunne ikke laste QR-kode',
        linkCannotBeShared: 'üîí Denne lenken kan ikke deles. Du m√• skanne QR-koden p√• nytt for √• f√• tilgang.',
        qrExpired: '‚è±Ô∏è Denne QR-koden har utl√∏pt og er allerede slettet fra systemet.',
        qrNotFound: 'üîç QR-koden ble ikke funnet. Den kan ha blitt slettet.',
        couldNotLoad: '‚ö†Ô∏è Kunne ikke laste QR-kode. Vennligst pr√∏v igjen.',
        passwordProtected: 'Denne filen er passordbeskyttet',
        enterPassword: 'Skriv inn passord for √• f√• tilgang',
        passwordPlaceholder: 'Skriv inn passord',
        wrongPassword: 'Feil passord. Pr√∏v igjen.',
        unlock: 'L√•s opp',
        accessGranted: 'Du har n√• tilgang til filen',
        secureModeDecrypted: 'Secure Mode: dekryptert lokalt',
        expiresIn: 'Utl√∏per om {{time}}',
        textMessage: 'Tekstmelding',
        copyText: 'Kopier tekst',
        textCopied: 'Tekst kopiert',
        urls: 'URL',
        urlsPlural: 'URL-er',
        copyAll: 'Kopier alle',
        linksCopied: 'Lenker kopiert',
        openAll: '√Öpne alle',
        copy: 'Kopier',
        open: '√Öpne',
        fileType: 'Filtype',
        size: 'St√∏rrelse',
        downloadFile: 'Last ned fil',
        loadingFile: 'Laster fil...',
        couldNotDownload: 'Kunne ikke laste ned fil',
        fileDownloaded: 'Fil lastet ned',
        viewOnly: 'Denne filen kan kun vises, ikke lastes ned',
        previewNotAvailable: 'Forh√•ndsvisning er ikke tilgjengelig for dette innholdet. Last ned filen for √• se innholdet.',
        browserNotSupported: 'Din nettleser st√∏tter ikke video-avspilling.',
        browserNotSupportedAudio: 'Din nettleser st√∏tter ikke audio-avspilling.',
        fileViewOnly: '‚ö†Ô∏è Denne filen kan kun vises',
        sharingStats: 'Delingsstatistikk',
        totalScans: 'Totalt antall scanninger',
        totalDownloads: 'Totalt antall nedlastinger',
      },
      unlockScreen: {
        unlockFile: 'L√•s opp filen',
        scanQr2: 'For √• √•pne denne filen m√• du skanne den andre QR-koden (QR #2)',
        openingCamera: '√Öpner kamera...',
        secureModeActive: 'Secure Mode aktivert',
        secureModeDesc: 'Denne filen er beskyttet med to-QR-kode-sikkerhet. Skann oppl√•singskoden for √• dekryptere innholdet lokalt.',
        expiryDate: 'Utl√∏psdato',
        scanQr2Button: 'Skann QR #2',
        unlocking: 'L√•ser opp...',
        neverStoredUnencrypted: 'Filen blir aldri lagret ukryptert p√• serveren',
        invalidQr: 'Ugyldig QR-kode. Vennligst skann oppl√•singskoden (QR #2).',
      },
      qrDetail: {
        qr2NotAvailable: 'QR #2 ikke tilgjengelig',
        qr2SecurityNote: 'Av sikkerhetshensyn er QR #2 (oppl√•singskode) kun tilgjengelig n√•r den f√∏rst opprettes. Last ned begge QR-kodene umiddelbart etter opprettelse.',
        secureModeTwoQrs: 'Secure Mode ‚Äì To QR-koder',
        yourQrCodes: 'Dine QR-koder',
        bothMustBeScanned: 'Begge m√• skannes for √• f√• tilgang',
        accessCode: 'Tilgangskode',
        shareWithRecipient: 'Del med mottaker',
        unlockCode: 'Oppl√•singskode',
        keyToUnlock: 'N√∏kkel for √• l√•se opp',
        downloadQr2Immediately: '‚ö†Ô∏è Last ned QR #2 umiddelbart!',
        qr2CannotBeShownAgain: 'QR #2 kan ikke vises igjen etter at siden er oppdatert. Last ned begge QR-kodene n√•.',
        shareQr1First: 'üí° Del QR #1 f√∏rst, deretter QR #2 via en annen kanal for ekstra sikkerhet',
        downloadBoth: 'Last ned begge',
        shareQr1: 'Del QR #1',
        yourQrCode: 'Din QR-kode',
        scanToAccess: 'Skann koden for √• f√• tilgang til filen',
        downloadQr: 'Last ned QR',
        share: 'Del',
        fileDetails: 'Fildetaljer',
        fileName: 'Filnavn',
        size: 'St√∏rrelse',
        type: 'Type',
        mode: 'Modus',
        viewOnly: 'Kun visning',
        settings: 'Innstillinger',
        expiresIn: 'Utl√∏per om',
        maxScans: 'Maks scanninger',
        maxDownloads: 'Maks nedlastinger',
        password: 'Passord',
        activated: 'Aktivert',
        created: 'Opprettet',
        realtimeStats: 'Sanntidsstatistikk',
        scans: 'Scanninger',
        downloads: 'Nedlastinger',
        previewHowFileLooks: 'Forh√•ndsvis hvordan filen ser ut',
        previewDesc: 'Se hvordan mottakeren vil oppleve filen',
        preview: 'Forh√•ndsvis',
        linkCopied: 'Lenke kopiert!',
        couldNotCopyLink: 'Kunne ikke kopiere lenke. Pr√∏v igjen.',
        shareFile: 'Del fil: {{fileName}}',
        scanQrToAccess: 'Skann QR-koden for √• f√• tilgang til filen',
        bothQrsDownloaded: 'Begge QR-koder lastet ned',
        qrDownloaded: 'QR-kode lastet ned',
        untilFirstScan: 'Til f√∏rste scanning',
        never: 'Aldri',
        lessThanHour: 'Mindre enn 1 time',
        day: 'dag',
        days: 'dager',
        hour: 'time',
        hours: 'timer',
      },
      app: {
        qrCreated: 'QR-kode opprettet!',
        qrDeleted: 'QR-kode slettet',
        couldNotDeleteQr: 'Kunne ikke slette QR-kode',
        couldNotLoadQrs: '‚ö†Ô∏è Kunne ikke laste QR-koder. Vennligst pr√∏v igjen.',
        mustScanQr1First: 'Du m√• skanne QR #1 f√∏rst!',
        qr2WithoutQr1: 'Denne QR-koden er en oppl√•singskode (QR #2) som krever at du f√∏rst scanner tilgangskoden (QR #1).',
        secureModeUsesTwoQrs: 'Secure Mode bruker to QR-koder for ekstra sikkerhet:',
        qr1AccessCode: '1Ô∏è‚É£ QR #1 (Tilgangskode) - Skann denne f√∏rst',
        qr2UnlockCode: '2Ô∏è‚É£ QR #2 (Oppl√•singskode) - Skann denne deretter',
        backToHome: 'Tilbake til hovedsiden',
        fetchingDecryptionKey: 'Henter dekrypteringsn√∏kkel...',
        couldNotFetchKey: '‚ö†Ô∏è Kunne ikke hente dekrypteringsn√∏kkel',
        qr1ScanExpired: '‚ö†Ô∏è QR #1 scan utl√∏pt. Skann QR #1 p√• nytt!',
      },
      coins: {
        yourCoins: 'Dine mynter',
        buy50Coins: 'Kj√∏p 50 coins ‚Äì 29 kr',
        buyCoins: 'Kj√∏p mynter',
        loginRequired: 'Vennligst logg inn for √• kj√∏pe coins',
        checkoutError: 'Kunne ikke starte betaling',
      },
      success: {
        thankYou: 'Takk for kj√∏pet!',
        purchaseComplete: 'Kj√∏pet ditt har blitt fullf√∏rt.',
        backToHome: 'Tilbake til hjem',
      },
    },
  },
  no: {
    translation: {
      common: {
        appName: 'OneTimeQR',
        tagline: 'Del filer via QR',
        upload: 'Last opp',
        myQrs: 'Mine QR-koder',
        login: 'Logg inn',
        logout: 'Logg ut',
        user: 'Bruker',
        loginError: 'Kunne ikke logge inn',
        logoutSuccess: 'Logget ut',
        logoutError: 'Kunne ikke logge ut',
        language: 'Spr√•k',
        english: 'Engelsk',
        norwegian: 'Norsk',
        back: 'Tilbake',
      },
      upload: {
        getStarted: 'Kom i gang direkte',
        freeLimit: 'Del filer opptil <strong>1 MB</strong> med <strong>10 minutters</strong> gyldighet',
        loginPrompt: 'üíé Logg inn for mer: Opptil 20 MB, lengre gyldighet og avanserte features',
        shareContent: 'Del innhold via QR-kode',
        combineFiles: 'Kombiner filer, tekst og URLer ‚Ä¢ Gratis opp til 20 MB',
        combineFilesGuest: 'Kombiner filer (maks 1 MB), tekst og URLer',
        title: 'Tittel (valgfritt)',
        titlePlaceholder: 'Navn p√• QR-koden',
        whatToShare: 'Hva vil du dele? (valgfritt)',
        files: 'Fil(er) / Bilde(r)',
        addFiles: 'Legg til fil(er)',
        fileTypes: 'Alle filtyper st√∏ttes',
        text: 'Tekst (maks 200 tegn)',
        textPlaceholder: 'Skriv din melding...',
        characters: 'tegn',
        urls: 'URL(er)',
        urlPlaceholder: 'https://example.com',
        invalidUrl: 'Ugyldig URL. M√• starte med http:// eller https://',
        expiryTitle: 'Hvor lenge skal den leve?',
        expirySubtitle: 'Innholdet slettes automatisk etter valgt tid',
        expiry10m: '10 minutter',
        expiry30m: '30 minutter',
        expiry1h: '1 time',
        expiry24h: '24 timer',
        expiry7d: '7 dager',
        expiryScan: 'Til noen scanner',
        pro: 'Pro',
        loginForMore: 'Logg inn for √• f√• tilgang til lengre gyldighet (30 min, 1h, 24h, 7d) og flere funksjoner.',
        scanExpiryNote: 'Innholdet utl√∏per uansett etter 7 dager. Sett antall scanninger under "Avanserte innstillinger".',
        securityTitle: 'Velg sikkerhetsniv√•',
        securitySubtitle: 'Ekstra beskyttelse med to QR-koder',
        standardMode: 'Standard mode',
        standardModeDesc: '√ân QR-kode ‚Äì raskt og enkelt',
        standardModeNote: 'Filen slettes etter tid eller visninger',
        secureMode: 'Secure Mode',
        secureModeDesc: 'To QR-koder ‚Äì ekstra sikkerhet',
        secureModeForSensitive: 'Bruk Secure Mode for sensitivt innhold',
        secureModeNote: 'Mottaker m√• skanne QR #2 for √• √•pne filen',
        secureModeInfo: '<strong>Ekstra sikkerhet:</strong> QR #1 gir tilgang, QR #2 l√•ser opp innholdet. Begge m√• skannes for √• se filen.',
        secureModeLoginRequired: 'Secure Mode krever innlogging. Logg inn for √• bruke to-QR-kode-sikkerhet.',
        advancedSettings: 'Avanserte innstillinger',
        advancedSettingsSubtitle: 'Valgfrie begrensninger og sikkerhet',
        maxScans: 'Maks antall scanninger',
        maxScansNote: 'La st√• tom for ubegrenset',
        maxDownloads: 'Maks nedlastinger',
        maxDownloadsNote: 'La st√• tom for ubegrenset',
        viewOnly: 'Kun visning',
        viewOnlyNote: 'Blokkerer nedlasting og long-press',
        noPreview: 'Forh√•ndsvisning ikke tilgjengelig',
        noPreviewNote: 'Kun nedlasting, ingen visning av innhold',
        passwordProtection: 'Passordbeskyttelse',
        passwordNote: 'Krev passord ved scanning',
        passwordPlaceholder: 'Skriv inn passord',
        generateQr: 'Lag QR-kode',
        generating: 'Lager...',
        addContent: 'Legg til minst ett element (fil, tekst eller URL)',
        fileSizeExceeded: 'Filst√∏rrelse overskrider grensen p√• {{maxSize}}. {{loginPrompt}}',
        secureModeRequiresLogin: 'Secure Mode krever innlogging. Logg inn for √• bruke to-QR-kode-sikkerhet.',
        createQrError: 'Kunne ikke opprette QR-kode',
        mustBeLoggedIn: 'Du m√• v√¶re logget inn for √• opprette QR-koder',
        sharedContent: 'Delt innhold',
        noShareableLink: 'Ingen delbar lenke',
        noShareableLinkDesc: 'Scanning legger til engangs-token som utl√∏per etter bruk. QR-koden kan scannes mange ganger, men URL-en kan ikke deles videre.',
        autoCleanup: 'Automatisk opprydding',
        autoCleanupDesc: 'Filen slettes etter tid eller bruk. Null manuelt arbeid. Ingen kopier.',
        securityFirst: 'Sikkerhet f√∏rst',
        securityFirstDesc: 'Zero-link teknologi: URL-er med one-time tokens. Ingen permanent tilgang.',
        coinCost: 'Coin-kostnad',
        free: 'Gratis',
        insufficientCoins: 'Du trenger {{required}} coins, men du har bare {{current}} coins',
        insufficientCoinsShort: 'Ikke nok coins',
        loginRequiredForCoins: 'Vennligst logg inn for √• bruke premium-funksjoner',
        loadingCoins: 'Laster coins...',
        coinsDeducted: '{{amount}} coins trukket',
        coinDeductionFailed: 'QR opprettet, men coins kunne ikke trekkes. Vennligst kontakt support.',
        acceptTerms: 'Jeg godtar Vilk√•r for bruk og Personvernregler',
        acceptTermsPrefix: 'Jeg godtar',
        termsAndPrivacy: 'Vilk√•r & Personvern',
        mustAcceptTerms: 'Du m√• godta Vilk√•r for bruk for √• fortsette',
      },
      coins: {
        yourCoins: 'Dine mynter',
        buy50Coins: 'Kj√∏p 50 coins ‚Äì 29 kr',
        buyCoins: 'Kj√∏p mynter',
        loginRequired: 'Vennligst logg inn for √• kj√∏pe coins',
        checkoutError: 'Kunne ikke starte betaling',
      },
      success: {
        thankYou: 'Takk for kj√∏pet!',
        purchaseComplete: 'Kj√∏pet ditt har blitt fullf√∏rt.',
        backToHome: 'Tilbake til hjem',
        processing: 'Behandler...',
        waitingForCoins: 'Venter p√• at coins skal oppdateres...',
      },
      qrList: {
        noQrsYet: 'Ingen QR-koder enn√•',
        uploadFile: 'Last opp en fil for √• komme i gang',
        loginToSee: 'Logg inn for √• se dine QR-koder',
        loginPrompt: 'Logg inn med Google for √• administrere dine QR-koder og se statistikk',
        myQrs: 'Mine QR-koder',
        manageShares: 'Administrer dine aktive delinger',
        created: 'Opprettet',
        deleteQr: 'Slett QR-kode?',
        deleteConfirm: 'Er du sikker p√• at du vil slette "{{fileName}}"? Denne handlingen kan ikke angres, og filen vil bli permanent slettet.',
        cancel: 'Avbryt',
        delete: 'Slett',
        expired: 'Utl√∏pt',
        expiresIn: 'Utl√∏per om {{time}}',
        expiresInHours: 'Utl√∏per om {{hours}}t {{minutes}}m {{seconds}}s',
        expiresInMinutes: 'Utl√∏per om {{minutes}}m {{seconds}}s',
        expiresInDays: 'Utl√∏per om {{days}} dag',
        expiresInDaysPlural: 'Utl√∏per om {{days}} dager',
        untilFirstScan: 'Til f√∏rste scanning',
        noExpiry: 'Ingen utl√∏pstid',
        secureMode: 'Secure Mode',
        passwordProtected: 'Passordbeskyttet',
        viewOnly: 'Kun visning',
        scans: 'Scanninger',
        downloads: 'Nedlastinger',
        showFile: 'Vis fil',
        hideFile: 'Skjul fil',
        loadingFile: 'Laster fil...',
        couldNotLoadFile: 'Kunne ikke laste filen',
        qrCodePointsTo: 'QR-koden peker til:',
        copyLink: 'Kopier lenke',
        copied: 'Kopiert!',
        downloadQr: 'Last ned QR-kode',
        downloadBothQrs: 'Last ned begge QR-koder',
        bothQrsDownloaded: 'Begge QR-koder lastet ned! üîê',
        qrDownloaded: 'QR-kode lastet ned! ‚úÖ',
        accessCode: 'Tilgangskode',
        shareWithRecipient: 'Del med mottaker',
        unlockCode: 'Oppl√•singskode',
        keyToUnlock: 'N√∏kkel for √• l√•se opp',
        noUrl: 'üîí Ingen URL - kun visning',
        shareQr1First: 'üí° Del QR #1 f√∏rst, deretter QR #2 via en annen kanal for ekstra sikkerhet',
        twoQrsForSecurity: 'To QR-koder for ekstra sikkerhet ‚Äì begge m√• skannes',
        scanToShare: 'Skann QR-koden for √• dele ‚Äì ingen lenke, ingen historikk',
      },
      scanView: {
        somethingShared: 'Noe er delt med deg!',
        openingContent: '√Öpner innholdet ditt...',
        back: 'Tilbake',
        loadingQr: 'Laster QR-kode...',
        couldNotLoadQr: 'Kunne ikke laste QR-kode',
        linkCannotBeShared: 'üîí Denne lenken kan ikke deles. Du m√• skanne QR-koden p√• nytt for √• f√• tilgang.',
        qrExpired: '‚è±Ô∏è Denne QR-koden har utl√∏pt og er allerede slettet fra systemet.',
        qrNotFound: 'üîç QR-koden ble ikke funnet. Den kan ha blitt slettet.',
        couldNotLoad: '‚ö†Ô∏è Kunne ikke laste QR-kode. Vennligst pr√∏v igjen.',
        passwordProtected: 'Denne filen er passordbeskyttet',
        enterPassword: 'Skriv inn passord for √• f√• tilgang',
        passwordPlaceholder: 'Skriv inn passord',
        wrongPassword: 'Feil passord. Pr√∏v igjen.',
        unlock: 'L√•s opp',
        accessGranted: 'Du har n√• tilgang til filen',
        secureModeDecrypted: 'Secure Mode: dekryptert lokalt',
        expiresIn: 'Utl√∏per om {{time}}',
        textMessage: 'Tekstmelding',
        copyText: 'Kopier tekst',
        textCopied: 'Tekst kopiert',
        urls: 'URL',
        urlsPlural: 'URL-er',
        copyAll: 'Kopier alle',
        linksCopied: 'Lenker kopiert',
        openAll: '√Öpne alle',
        copy: 'Kopier',
        open: '√Öpne',
        fileType: 'Filtype',
        size: 'St√∏rrelse',
        downloadFile: 'Last ned fil',
        loadingFile: 'Laster fil...',
        couldNotDownload: 'Kunne ikke laste ned fil',
        fileDownloaded: 'Fil lastet ned',
        viewOnly: 'Denne filen kan kun vises, ikke lastes ned',
        previewNotAvailable: 'Forh√•ndsvisning er ikke tilgjengelig for dette innholdet. Last ned filen for √• se innholdet.',
        browserNotSupported: 'Din nettleser st√∏tter ikke video-avspilling.',
        browserNotSupportedAudio: 'Din nettleser st√∏tter ikke audio-avspilling.',
        fileViewOnly: '‚ö†Ô∏è Denne filen kan kun vises',
        sharingStats: 'Delingsstatistikk',
        totalScans: 'Totalt antall scanninger',
        totalDownloads: 'Totalt antall nedlastinger',
      },
      unlockScreen: {
        unlockFile: 'L√•s opp filen',
        scanQr2: 'For √• √•pne denne filen m√• du skanne den andre QR-koden (QR #2)',
        openingCamera: '√Öpner kamera...',
        secureModeActive: 'Secure Mode aktivert',
        secureModeDesc: 'Denne filen er beskyttet med to-QR-kode-sikkerhet. Skann oppl√•singskoden for √• dekryptere innholdet lokalt.',
        expiryDate: 'Utl√∏psdato',
        scanQr2Button: 'Skann QR #2',
        unlocking: 'L√•ser opp...',
        neverStoredUnencrypted: 'Filen blir aldri lagret ukryptert p√• serveren',
        invalidQr: 'Ugyldig QR-kode. Vennligst skann oppl√•singskoden (QR #2).',
      },
      qrDetail: {
        qr2NotAvailable: 'QR #2 ikke tilgjengelig',
        qr2SecurityNote: 'Av sikkerhetshensyn er QR #2 (oppl√•singskode) kun tilgjengelig n√•r den f√∏rst opprettes. Last ned begge QR-kodene umiddelbart etter opprettelse.',
        secureModeTwoQrs: 'Secure Mode ‚Äì To QR-koder',
        yourQrCodes: 'Dine QR-koder',
        bothMustBeScanned: 'Begge m√• skannes for √• f√• tilgang',
        accessCode: 'Tilgangskode',
        shareWithRecipient: 'Del med mottaker',
        unlockCode: 'Oppl√•singskode',
        keyToUnlock: 'N√∏kkel for √• l√•se opp',
        downloadQr2Immediately: '‚ö†Ô∏è Last ned QR #2 umiddelbart!',
        qr2CannotBeShownAgain: 'QR #2 kan ikke vises igjen etter at siden er oppdatert. Last ned begge QR-kodene n√•.',
        shareQr1First: 'üí° Del QR #1 f√∏rst, deretter QR #2 via en annen kanal for ekstra sikkerhet',
        downloadBoth: 'Last ned begge',
        shareQr1: 'Del QR #1',
        yourQrCode: 'Din QR-kode',
        scanToAccess: 'Skann koden for √• f√• tilgang til filen',
        downloadQr: 'Last ned QR',
        share: 'Del',
        fileDetails: 'Fildetaljer',
        fileName: 'Filnavn',
        size: 'St√∏rrelse',
        type: 'Type',
        mode: 'Modus',
        viewOnly: 'Kun visning',
        settings: 'Innstillinger',
        expiresIn: 'Utl√∏per om',
        maxScans: 'Maks scanninger',
        maxDownloads: 'Maks nedlastinger',
        password: 'Passord',
        activated: 'Aktivert',
        created: 'Opprettet',
        realtimeStats: 'Sanntidsstatistikk',
        scans: 'Scanninger',
        downloads: 'Nedlastinger',
        previewHowFileLooks: 'Forh√•ndsvis hvordan filen ser ut',
        previewDesc: 'Se hvordan mottakeren vil oppleve filen',
        preview: 'Forh√•ndsvis',
        linkCopied: 'Lenke kopiert!',
        couldNotCopyLink: 'Kunne ikke kopiere lenke. Pr√∏v igjen.',
        shareFile: 'Del fil: {{fileName}}',
        scanQrToAccess: 'Skann QR-koden for √• f√• tilgang til filen',
        bothQrsDownloaded: 'Begge QR-koder lastet ned',
        qrDownloaded: 'QR-kode lastet ned',
        untilFirstScan: 'Til f√∏rste scanning',
        never: 'Aldri',
        lessThanHour: 'Mindre enn 1 time',
        day: 'dag',
        days: 'dager',
        hour: 'time',
        hours: 'timer',
      },
      app: {
        qrCreated: 'QR-kode opprettet!',
        qrDeleted: 'QR-kode slettet',
        couldNotDeleteQr: 'Kunne ikke slette QR-kode',
        couldNotLoadQrs: '‚ö†Ô∏è Kunne ikke laste QR-koder. Vennligst pr√∏v igjen.',
        mustScanQr1First: 'Du m√• skanne QR #1 f√∏rst!',
        qr2WithoutQr1: 'Denne QR-koden er en oppl√•singskode (QR #2) som krever at du f√∏rst scanner tilgangskoden (QR #1).',
        secureModeUsesTwoQrs: 'Secure Mode bruker to QR-koder for ekstra sikkerhet:',
        qr1AccessCode: '1Ô∏è‚É£ QR #1 (Tilgangskode) - Skann denne f√∏rst',
        qr2UnlockCode: '2Ô∏è‚É£ QR #2 (Oppl√•singskode) - Skann denne deretter',
        backToHome: 'Tilbake til hovedsiden',
        fetchingDecryptionKey: 'Henter dekrypteringsn√∏kkel...',
        couldNotFetchKey: '‚ö†Ô∏è Kunne ikke hente dekrypteringsn√∏kkel',
        qr1ScanExpired: '‚ö†Ô∏è QR #1 scan utl√∏pt. Skann QR #1 p√• nytt!',
      },
    },
  },
};

i18next
  .use(initReactI18next)
  .init({
    resources,
    lng: initialLanguage,
    fallbackLng: 'en',
    interpolation: {
      escapeValue: false,
    },
  })
  .catch((err) => {
    console.error('Failed to init i18n', err);
  });

export const availableLanguages = [
  { code: 'en', label: resources.en.translation.common.english },
  { code: 'no', label: resources.no.translation.common.norwegian },
];

export function setAppLanguage(code: string) {
  i18next.changeLanguage(code);
  if (typeof window !== 'undefined') {
    localStorage.setItem(STORAGE_KEY, code);
  }
}

export default i18next;

